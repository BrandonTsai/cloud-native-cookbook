---
title: "#3 Helm 3 Concept"
author: Brandon Tsai
---


Helm is not only a configuration templating tool but also a package management solution for Kubernetes. It can install, upgrade and uninstall application packages to Kubernetes, similar to install packages via yum or apt in linux system.

Helm combines several Kubernetes manifests into a single package called a `chart`.
It can get packages from local or remote chart registries. This help developers to deploy most common third party applications to their own namespaces and cluster without implementing the Kubernetes YAML manifests and running CI/CD pipelines for deployment.


Installation
------------

You can refer https://helm.sh/docs/intro/install/ to install helm on your system.

MacOS User can install helm via Homebrew:

```
$ brew install helm
```


Helm Basic Usage
---------------


### Add a repository of Helm charts to your local Helm client:

```
$ helm repo add stable https://charts.helm.sh/stable
```


### Update the repository:

```
$ helm repo update
```

### helm search repo:

```
$ helm search repo mysql
NAME                            	CHART VERSION	APP VERSION	DESCRIPTION                                       
stable/mysql                    	1.6.7        	5.7.30     	Fast, reliable, scalable, and easy to use open-...
stable/mysqldump                	2.6.1        	2.4.1      	A Helm chart to help backup MySQL databases usi...
stable/prometheus-mysql-exporter	0.7.1        	v0.11.0    	DEPRECATED A Helm chart for prometheus mysql ex...
stable/percona                  	1.2.1        	5.7.26     	free, fully compatible, enhanced, open source d...
stable/percona-xtradb-cluster   	1.0.5        	5.7.19     	free, fully compatible, enhanced, open source d...
stable/phpmyadmin               	4.3.5        	5.0.1      	DEPRECATED phpMyAdmin is an mysql administratio...
stable/gcloud-sqlproxy          	0.6.1        	1.11       	DEPRECATED Google Cloud SQL Proxy                 
stable/mariadb                  	7.3.14       	10.3.22    	DEPRECATED Fast, reliable, scalable, and easy t...

```

### Search with available versions

```
$ helm search repo -l stable/mysql
NAME            	CHART VERSION	APP VERSION	DESCRIPTION                                       
stable/mysql    	1.6.7        	5.7.30     	Fast, reliable, scalable, and easy to use open-...
stable/mysql    	1.6.6        	5.7.30     	Fast, reliable, scalable, and easy to use open-...
...
```

### Get value information

```
$ helm show values stable/mysql
```


### Install an example MySQL chart:

```

# Install with default values
$ helm install mydb stable/mysql

# Install with custom yaml file
$ helm install mydb stable/mysql -f myvalue.yaml

# Install with value overrides
$ helm install mydb stable/mysql --set mysqlRootPassword=helmtest123

# INstall with particular version
$ helm install mydb stable/mysql --version "1.6.6"
```

### Verify that the chart has installed successfully:

```
$ helm list
NAME      	NAMESPACE	REVISION	UPDATED                              	STATUS  	CHART            	APP VERSION  
mydb      	myproject	1       	2020-10-05 11:58:23.154884 +1100 AEDT	deployed	mysql-1.6.6      	5.7.30       
```


### Upgrade to new version

```
$ helm upgrade mydb stable/mysql --version "1.6.7"
```

### Helm rollbacks

```
# Current chart version is 1.6.7
$ helm list
NAME      	NAMESPACE	REVISION	UPDATED                              	STATUS  	CHART            	APP VERSION  
mydb      	myproject	2       	2020-10-05 12:00:49.252883 +1100 AEDT	deployed	mysql-1.6.7      	5.7.30       

# Rollback to revision 1
$ helm rollback mydb 1
Rollback was a success! Happy Helming!

# verify chart version is rollback to 1.6.6
$ helm list
NAME      	NAMESPACE	REVISION	UPDATED                              	STATUS  	CHART            	APP VERSION  
mydb      	myproject	3       	2020-10-05 12:02:47.831528 +1100 AEDT	deployed	mysql-1.6.6      	5.7.30    
```


### Remove package

```
$ helm uninstall mydb
release "mydb" uninstalled
```


### Pull the package's chart to local

`helm pull` allow user to download the value and the helm chart of a package for doing customize.

```
$ helm pull stable/mysql
$ ls
mysql-1.6.9.tgz	mysql.value
```


Implement Your First Helm Charts
------

A Helm chart is a collection of files inside of a directory that describe a related set of Kubernetes resources.
The directory name is the name of the chart.

```
myapp/
  Chart.yaml          # A YAML file containing information about the chart
  LICENSE             # OPTIONAL: A plain text file containing the license for the chart
  README.md           # OPTIONAL: A human-readable README file
  values.yaml         # The default configuration values for this chart
  values.schema.json  # OPTIONAL: A JSON Schema for imposing a structure on the values.yaml file
  charts/             # A directory containing any charts upon which this chart depends.
  crds/               # Custom Resource Definitions
  templates/          # A directory of templates that, when combined with values,
                      # will generate valid Kubernetes manifest files.
  templates/NOTES.txt # OPTIONAL: A plain text file containing short usage notes
```


Inside of this directory, Helm will expect a structure that matches this:

- create projects in OpenShift
- assign group Edit permission
- create Quota
- create default Network Policy


Push Helm Chars to Private Registry
----------------------------

```
helm package
```

```
helm push
```

Conclusion: Helm
-----------------


Helm is a package manager that also happens to include templating capabilities. Unfortunately, a lot of people focus only on the usage of Helm as a template manager and nothing else.

Technically Helm can be used as only a templating engine by stopping the deployment process in the manifest level. It is perfectly possible to use Helm only to create plain Kubernetes manifests and then install them on the cluster using the standard methods (such as kubectl). But then you miss all the advantages of Helm (especially the application registry aspect).

At the time of writing Helm is the only package manager for Kubernetes, so if you want a way to group your manifests and a registry of your running applications, there are no off-the-shelf alternative apart from Helm.
